{% extends "core/base.html" %}
{% load static %}
{% load humanize %}
{% block title %}Accounting Report{% endblock %}
{% block content %}
<link "stylesheet" href="{% static 'css/account_report.css' %}" rel="stylesheet">
<div class="page-header">
    <div>
        <h1>Accounting Report</h1>
        <p>View financial activity and transaction summaries</p>
    </div>
</div>

<form method="GET" class="filter-form">
    <div class="filter-row">
        <div class="filter-item">
            <label>Start Date</label>
            <input type="date" name="start_date" value="{{ start_date }}">
        </div>
        <div class="filter-item">
            <label>End Date</label>
            <input type="date" name="end_date" value="{{ end_date }}">
        </div>
        <div class="filter-item">
            <button type="submit" class="btn-primary">Filter</button>
        </div>
    </div>
</form>

<div class="summary-cards">

    <div class="summary-card">
        <h3>Cash</h3>
        <p>₦{{ cash_total|floatformat:2|intcomma }}</p>
    </div>

    <div class="summary-card">
        <h3>Card</h3>
        <p>₦{{ card_total|floatformat:2|intcomma }}</p>
    </div>

    <div class="summary-card">
        <h3>Bank Transfer</h3>
        <p>₦{{ bank_total|floatformat:2|intcomma}}</p>
    </div>

    <div class="summary-card">
        <h3>Paystack</h3>
        <p>₦{{ paystack_total|floatformat:2|intcomma }}</p>
    </div>

    <div class="summary-card total">
        <h3>Total Revenue</h3>
        <p>₦{{ total_revenue|floatformat:2|intcomma }}</p>
    </div>

</div>

<div class="table-container">
    <table class="custom-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Guest</th>
                <th>Method</th>
                <th>Amount</th>
                <th>Status</th>
                <th>Date</th>
            </tr>
        </thead>
        <tbody>
            {% for p in payments %}
            <tr>
                <td>{{ p.id }}</td>
                <td>{{ p.reservation.guest_name }}</td>
                <td>{{ p.get_payment_method_display }}</td>
                <td>₦{{ p.amount|floatformat:2|intcomma }}</td>
                <td class="status">{{ p.status }}</td>
                <td>{{ p.created_at|date:"Y-m-d H:i" }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" style="text-align:center; padding:20px;">No payments found</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}